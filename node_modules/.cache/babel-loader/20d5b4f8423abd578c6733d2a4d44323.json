{"ast":null,"code":"var _jsxFileName = \"/Users/prashantkansal/Desktop/techgropse/digiTender/digiTenderFrontend/src/macroComponents/form/form.jsx\";\nimport React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"../../microComponents/input\";\nimport Select from \"../../microComponents/select\";\n\nclass Form extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formData: {},\n      errors: {}\n    };\n\n    this.validateOnSubmit = () => {\n      const result = Joi.validate(this.state.formData, this.schema, {\n        abortEarly: false\n      });\n      if (!result.error) return null;\n      const errors = {};\n\n      for (let item of result.error.details) {\n        errors[item.path[0]] = item.message;\n      }\n\n      return errors;\n\n      if (this.state.selectedFile1 === null) {\n        const errors = {};\n        errors.confirmPassword = \"password mismatch\";\n        return errors;\n      }\n    };\n\n    this.validateOnChange = input => {\n      const obj = {\n        [input.name]: input.value\n      };\n      const subSchema = {\n        [input.name]: this.schema[input.name]\n      };\n      const {\n        error\n      } = Joi.validate(obj, subSchema);\n      if (!error) return null;\n      return error.details[0].message;\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const errors = this.validateOnSubmit();\n      this.setState({\n        errors: errors || {}\n      });\n      if (errors) return;\n      this.doSubmit();\n    };\n\n    this.handleChange = async e => {\n      //validation on change of input\n      const errors = { ...this.state.errors\n      };\n      const errorMessage = this.validateOnChange(e.currentTarget);\n      if (errorMessage) errors[e.currentTarget.name] = errorMessage;else delete errors[e.currentTarget.name]; //setting state according to input\n\n      const formData = { ...this.state.formData\n      };\n      formData[e.currentTarget.name] = e.currentTarget.value;\n      this.setState({\n        formData,\n        errors\n      });\n    };\n\n    this.renderInput = (name, label, type = \"text\") => {\n      const {\n        formData,\n        errors\n      } = this.state;\n      return /*#__PURE__*/React.createElement(Input, {\n        onChange: this.handleChange,\n        value: formData[name],\n        label: label,\n        name: name,\n        error: errors[name],\n        type: type,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }\n      });\n    };\n\n    this.renderSelect = (name, label, options) => {\n      const {\n        formData,\n        errors\n      } = this.state;\n      return /*#__PURE__*/React.createElement(Select, {\n        onChange: this.handleChange,\n        value: formData[name],\n        label: label,\n        options: options,\n        name: name,\n        error: errors[name],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 7\n        }\n      });\n    };\n\n    this.renderButton = (label, handleSubmit) => {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-main-primary btn-block\",\n        disabled: this.validateOnSubmit(),\n        onClick: handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 7\n        }\n      }, label);\n    };\n  }\n\n}\n\nexport default Form;","map":{"version":3,"sources":["/Users/prashantkansal/Desktop/techgropse/digiTender/digiTenderFrontend/src/macroComponents/form/form.jsx"],"names":["React","Component","Joi","Input","Select","Form","state","formData","errors","validateOnSubmit","result","validate","schema","abortEarly","error","item","details","path","message","selectedFile1","confirmPassword","validateOnChange","input","obj","name","value","subSchema","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","errorMessage","currentTarget","renderInput","label","type","renderSelect","options","renderButton"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,KAAP,MAAkB,6BAAlB;AACA,OAAOC,MAAP,MAAmB,8BAAnB;;AAEA,MAAMC,IAAN,SAAmBJ,SAAnB,CAA6B;AAAA;AAAA;AAAA,SAC3BK,KAD2B,GACnB;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,MAAM,EAAE;AAFF,KADmB;;AAAA,SAM3BC,gBAN2B,GAMR,MAAM;AACvB,YAAMC,MAAM,GAAGR,GAAG,CAACS,QAAJ,CAAa,KAAKL,KAAL,CAAWC,QAAxB,EAAkC,KAAKK,MAAvC,EAA+C;AAC5DC,QAAAA,UAAU,EAAE;AADgD,OAA/C,CAAf;AAGA,UAAI,CAACH,MAAM,CAACI,KAAZ,EAAmB,OAAO,IAAP;AACnB,YAAMN,MAAM,GAAG,EAAf;;AACA,WAAK,IAAIO,IAAT,IAAiBL,MAAM,CAACI,KAAP,CAAaE,OAA9B,EAAuC;AACrCR,QAAAA,MAAM,CAACO,IAAI,CAACE,IAAL,CAAU,CAAV,CAAD,CAAN,GAAuBF,IAAI,CAACG,OAA5B;AACD;;AACD,aAAOV,MAAP;;AACA,UAAI,KAAKF,KAAL,CAAWa,aAAX,KAA6B,IAAjC,EAAuC;AACrC,cAAMX,MAAM,GAAG,EAAf;AACAA,QAAAA,MAAM,CAACY,eAAP,GAAyB,mBAAzB;AACA,eAAOZ,MAAP;AACD;AACF,KArB0B;;AAAA,SAuB3Ba,gBAvB2B,GAuBPC,KAAD,IAAW;AAC5B,YAAMC,GAAG,GAAG;AAAE,SAACD,KAAK,CAACE,IAAP,GAAcF,KAAK,CAACG;AAAtB,OAAZ;AACA,YAAMC,SAAS,GAAG;AAAE,SAACJ,KAAK,CAACE,IAAP,GAAc,KAAKZ,MAAL,CAAYU,KAAK,CAACE,IAAlB;AAAhB,OAAlB;AACA,YAAM;AAAEV,QAAAA;AAAF,UAAYZ,GAAG,CAACS,QAAJ,CAAaY,GAAb,EAAkBG,SAAlB,CAAlB;AACA,UAAI,CAACZ,KAAL,EAAY,OAAO,IAAP;AACZ,aAAOA,KAAK,CAACE,OAAN,CAAc,CAAd,EAAiBE,OAAxB;AACD,KA7B0B;;AAAA,SA+B3BS,YA/B2B,GA+BZ,MAAOC,CAAP,IAAa;AAC1BA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMrB,MAAM,GAAG,KAAKC,gBAAL,EAAf;AACA,WAAKqB,QAAL,CAAc;AAAEtB,QAAAA,MAAM,EAAEA,MAAM,IAAI;AAApB,OAAd;AAEA,UAAIA,MAAJ,EAAY;AAEZ,WAAKuB,QAAL;AACD,KAvC0B;;AAAA,SAyC3BC,YAzC2B,GAyCZ,MAAOJ,CAAP,IAAa;AAC1B;AACA,YAAMpB,MAAM,GAAG,EAAE,GAAG,KAAKF,KAAL,CAAWE;AAAhB,OAAf;AACA,YAAMyB,YAAY,GAAG,KAAKZ,gBAAL,CAAsBO,CAAC,CAACM,aAAxB,CAArB;AACA,UAAID,YAAJ,EAAkBzB,MAAM,CAACoB,CAAC,CAACM,aAAF,CAAgBV,IAAjB,CAAN,GAA+BS,YAA/B,CAAlB,KACK,OAAOzB,MAAM,CAACoB,CAAC,CAACM,aAAF,CAAgBV,IAAjB,CAAb,CALqB,CAM1B;;AACA,YAAMjB,QAAQ,GAAG,EAAE,GAAG,KAAKD,KAAL,CAAWC;AAAhB,OAAjB;AACAA,MAAAA,QAAQ,CAACqB,CAAC,CAACM,aAAF,CAAgBV,IAAjB,CAAR,GAAiCI,CAAC,CAACM,aAAF,CAAgBT,KAAjD;AACA,WAAKK,QAAL,CAAc;AAAEvB,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAAd;AACD,KAnD0B;;AAAA,SAqD3B2B,WArD2B,GAqDb,CAACX,IAAD,EAAOY,KAAP,EAAcC,IAAI,GAAG,MAArB,KAAgC;AAC5C,YAAM;AAAE9B,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,UAAuB,KAAKF,KAAlC;AACA,0BACE,oBAAC,KAAD;AACE,QAAA,QAAQ,EAAE,KAAK0B,YADjB;AAEE,QAAA,KAAK,EAAEzB,QAAQ,CAACiB,IAAD,CAFjB;AAGE,QAAA,KAAK,EAAEY,KAHT;AAIE,QAAA,IAAI,EAAEZ,IAJR;AAKE,QAAA,KAAK,EAAEhB,MAAM,CAACgB,IAAD,CALf;AAME,QAAA,IAAI,EAAEa,IANR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAUD,KAjE0B;;AAAA,SAmE3BC,YAnE2B,GAmEZ,CAACd,IAAD,EAAOY,KAAP,EAAcG,OAAd,KAA0B;AACvC,YAAM;AAAEhC,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,UAAuB,KAAKF,KAAlC;AACA,0BACE,oBAAC,MAAD;AACE,QAAA,QAAQ,EAAE,KAAK0B,YADjB;AAEE,QAAA,KAAK,EAAEzB,QAAQ,CAACiB,IAAD,CAFjB;AAGE,QAAA,KAAK,EAAEY,KAHT;AAIE,QAAA,OAAO,EAAEG,OAJX;AAKE,QAAA,IAAI,EAAEf,IALR;AAME,QAAA,KAAK,EAAEhB,MAAM,CAACgB,IAAD,CANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAUD,KA/E0B;;AAAA,SAiF3BgB,YAjF2B,GAiFZ,CAACJ,KAAD,EAAQT,YAAR,KAAyB;AACtC,0BACE;AACE,QAAA,SAAS,EAAC,gCADZ;AAEE,QAAA,QAAQ,EAAE,KAAKlB,gBAAL,EAFZ;AAGE,QAAA,OAAO,EAAEkB,YAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKGS,KALH,CADF;AASD,KA3F0B;AAAA;;AAAA;;AA8F7B,eAAe/B,IAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"../../microComponents/input\";\nimport Select from \"../../microComponents/select\";\n\nclass Form extends Component {\n  state = {\n    formData: {},\n    errors: {},\n  };\n\n  validateOnSubmit = () => {\n    const result = Joi.validate(this.state.formData, this.schema, {\n      abortEarly: false,\n    });\n    if (!result.error) return null;\n    const errors = {};\n    for (let item of result.error.details) {\n      errors[item.path[0]] = item.message;\n    }\n    return errors;\n    if (this.state.selectedFile1 === null) {\n      const errors = {};\n      errors.confirmPassword = \"password mismatch\";\n      return errors;\n    }\n  };\n\n  validateOnChange = (input) => {\n    const obj = { [input.name]: input.value };\n    const subSchema = { [input.name]: this.schema[input.name] };\n    const { error } = Joi.validate(obj, subSchema);\n    if (!error) return null;\n    return error.details[0].message;\n  };\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    const errors = this.validateOnSubmit();\n    this.setState({ errors: errors || {} });\n\n    if (errors) return;\n\n    this.doSubmit();\n  };\n\n  handleChange = async (e) => {\n    //validation on change of input\n    const errors = { ...this.state.errors };\n    const errorMessage = this.validateOnChange(e.currentTarget);\n    if (errorMessage) errors[e.currentTarget.name] = errorMessage;\n    else delete errors[e.currentTarget.name];\n    //setting state according to input\n    const formData = { ...this.state.formData };\n    formData[e.currentTarget.name] = e.currentTarget.value;\n    this.setState({ formData, errors });\n  };\n\n  renderInput = (name, label, type = \"text\") => {\n    const { formData, errors } = this.state;\n    return (\n      <Input\n        onChange={this.handleChange}\n        value={formData[name]}\n        label={label}\n        name={name}\n        error={errors[name]}\n        type={type}\n      />\n    );\n  };\n\n  renderSelect = (name, label, options) => {\n    const { formData, errors } = this.state;\n    return (\n      <Select\n        onChange={this.handleChange}\n        value={formData[name]}\n        label={label}\n        options={options}\n        name={name}\n        error={errors[name]}\n      />\n    );\n  };\n\n  renderButton = (label, handleSubmit) => {\n    return (\n      <button\n        className=\"btn btn-main-primary btn-block\"\n        disabled={this.validateOnSubmit()}\n        onClick={handleSubmit}\n      >\n        {label}\n      </button>\n    );\n  };\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}