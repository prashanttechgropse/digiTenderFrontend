{"ast":null,"code":"var _jsxFileName = \"/Users/prashantkansal/Desktop/techgropse/digiTender/digiTenderFrontend/src/customerComponents/customerTenderManagementComponents/customerCreateTender.jsx\";\nimport React, { Component } from \"react\";\nimport Joi from \"joi-browser\";\nimport DisplayTenderItemList from \"../../microComponents/displayTenderItemList\";\nimport AddItemCard from \"../../microComponents/addItemCard\";\nimport UploadTenderTermsAndConditions from \"../../microComponents/uploadTenderTermsAndConditions\";\nimport TenderPublishModal from \"../../microComponents/tenderPublishModal\";\nimport AddTenderDetailsCard from \"../../microComponents/addTenderDetailsCard\";\n\nclass CustomerCreateTender extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formData: {\n        tenderClosingDate: \"\",\n        tenderDeliveryDate: \"\",\n        tenderDeliveryLocation: \"\",\n        tenderBudgetAmount: \"\",\n        isPublished: false,\n        itemList: []\n      },\n      file: null,\n      errors: {}\n    };\n    this.schema = {\n      tenderClosingDate: Joi.date().required(),\n      tenderDeliveryDate: Joi.date().required(),\n      tenderBudgetAmount: Joi.string().required(),\n      tenderDeliveryLocation: Joi.string().required(),\n      isPublished: Joi.boolean().required(),\n      itemList: Joi.array().min(1)\n    };\n\n    this.updateTenderDetails = (tenderDetails, errors) => {\n      let formData = { ...this.state.formData\n      };\n\n      for (let item in tenderDetails) {\n        formData[item] = tenderDetails[item];\n      }\n\n      this.setState({\n        formData: formData\n      });\n      this.setState({\n        errors: errors\n      });\n    };\n\n    this.addItem = item => {\n      const formData = { ...this.state.formData\n      };\n      formData.itemList.push(item);\n      this.setState({\n        formData\n      });\n    };\n\n    this.itemDelete = itemIndex => {\n      const formData = { ...this.state.formData\n      };\n      formData.itemList.splice(itemIndex, 1);\n      this.setState({\n        formData\n      });\n    };\n\n    this.validateOnUpload = () => {\n      const result = Joi.validate(this.state.formData, this.schema, {\n        abortEarly: false\n      });\n      if (!result.error) return null;\n      const errors = {};\n\n      for (let item of result.error.details) {\n        errors[item.path[0]] = item.message;\n      }\n\n      return errors;\n    };\n\n    this.uploadFile = async (file, isPublished) => {\n      const formData = { ...this.state.formData\n      };\n      formData.isPublished = isPublished;\n      await this.setState({\n        formData\n      });\n      await this.setState({\n        file\n      });\n    };\n  }\n\n  render() {\n    const {\n      formData\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"breadcrumb-header justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"my-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"content-title mb-0 my-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, \"Tender\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-muted mt-1 tx-13 ml-2 mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 15\n      }\n    }, \"/ Create Tender\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row row-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(AddTenderDetailsCard, {\n      updateTenderDetails: (formData, errors) => this.updateTenderDetails(formData, errors),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(AddItemCard, {\n      addItem: item => this.addItem(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }), formData.itemList.length === 0 ? /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }, \"\\\"no items added yet\\\"\") : /*#__PURE__*/React.createElement(DisplayTenderItemList, {\n      itemList: formData.itemList,\n      itemDelete: index => this.itemDelete(index),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(UploadTenderTermsAndConditions, {\n      onUpload: (file, isPublished) => this.uploadFile(file, isPublished),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(TenderPublishModal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default CustomerCreateTender;","map":{"version":3,"sources":["/Users/prashantkansal/Desktop/techgropse/digiTender/digiTenderFrontend/src/customerComponents/customerTenderManagementComponents/customerCreateTender.jsx"],"names":["React","Component","Joi","DisplayTenderItemList","AddItemCard","UploadTenderTermsAndConditions","TenderPublishModal","AddTenderDetailsCard","CustomerCreateTender","state","formData","tenderClosingDate","tenderDeliveryDate","tenderDeliveryLocation","tenderBudgetAmount","isPublished","itemList","file","errors","schema","date","required","string","boolean","array","min","updateTenderDetails","tenderDetails","item","setState","addItem","push","itemDelete","itemIndex","splice","validateOnUpload","result","validate","abortEarly","error","details","path","message","uploadFile","render","length","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport Joi from \"joi-browser\";\nimport DisplayTenderItemList from \"../../microComponents/displayTenderItemList\";\nimport AddItemCard from \"../../microComponents/addItemCard\";\nimport UploadTenderTermsAndConditions from \"../../microComponents/uploadTenderTermsAndConditions\";\nimport TenderPublishModal from \"../../microComponents/tenderPublishModal\";\nimport AddTenderDetailsCard from \"../../microComponents/addTenderDetailsCard\";\n\nclass CustomerCreateTender extends Component {\n  state = {\n    formData: {\n      tenderClosingDate: \"\",\n      tenderDeliveryDate: \"\",\n      tenderDeliveryLocation: \"\",\n      tenderBudgetAmount: \"\",\n      isPublished: false,\n      itemList: [],\n    },\n    file: null,\n    errors: {},\n  };\n\n  schema = {\n    tenderClosingDate: Joi.date().required(),\n    tenderDeliveryDate: Joi.date().required(),\n    tenderBudgetAmount: Joi.string().required(),\n    tenderDeliveryLocation: Joi.string().required(),\n    isPublished: Joi.boolean().required(),\n    itemList: Joi.array().min(1),\n  };\n\n  updateTenderDetails = (tenderDetails, errors) => {\n    let formData = { ...this.state.formData };\n    for (let item in tenderDetails) {\n      formData[item] = tenderDetails[item];\n    }\n    this.setState({ formData: formData });\n    this.setState({ errors: errors });\n  };\n\n  addItem = (item) => {\n    const formData = { ...this.state.formData };\n    formData.itemList.push(item);\n    this.setState({ formData });\n  };\n\n  itemDelete = (itemIndex) => {\n    const formData = { ...this.state.formData };\n    formData.itemList.splice(itemIndex, 1);\n    this.setState({ formData });\n  };\n\n  validateOnUpload = () => {\n    const result = Joi.validate(this.state.formData, this.schema, {\n      abortEarly: false,\n    });\n    if (!result.error) return null;\n    const errors = {};\n    for (let item of result.error.details) {\n      errors[item.path[0]] = item.message;\n    }\n    return errors;\n  };\n\n  uploadFile = async (file, isPublished) => {\n    const formData = { ...this.state.formData };\n    formData.isPublished = isPublished;\n    await this.setState({ formData });\n    await this.setState({ file });\n  };\n\n  render() {\n    const { formData } = this.state;\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"breadcrumb-header justify-content-between\">\n          <div className=\"my-auto\">\n            <div className=\"d-flex\">\n              <h4 className=\"content-title mb-0 my-auto\">Tender</h4>\n              <span className=\"text-muted mt-1 tx-13 ml-2 mb-0\">\n                / Create Tender\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"row row-sm\">\n          <div className=\"col-xl-12\">\n            <AddTenderDetailsCard\n              updateTenderDetails={(formData, errors) =>\n                this.updateTenderDetails(formData, errors)\n              }\n            />\n            <AddItemCard addItem={(item) => this.addItem(item)} />\n            {formData.itemList.length === 0 ? (\n              <h2>\"no items added yet\"</h2>\n            ) : (\n              <DisplayTenderItemList\n                itemList={formData.itemList}\n                itemDelete={(index) => this.itemDelete(index)}\n              />\n            )}\n\n            <UploadTenderTermsAndConditions\n              onUpload={(file, isPublished) =>\n                this.uploadFile(file, isPublished)\n              }\n            />\n          </div>\n        </div>\n        <TenderPublishModal />\n      </div>\n    );\n  }\n}\n\nexport default CustomerCreateTender;\n"]},"metadata":{},"sourceType":"module"}