{"ast":null,"code":"var _jsxFileName = \"/Users/prashantkansal/Desktop/techgropse/digiTender/digiTenderFrontend/src/createAccount.jsx\";\nimport React, { Component } from \"react\";\nimport Form from \"./macroComponents/form/form\";\nimport Joi from \"joi-browser\";\nimport axios from \"axios\"; //const config = require(\"config\");\n\naxios.interceptors.response.use(null, error => {\n  if (!error.response || error.response >= 404) {\n    alert(\"an unexpected error occured\");\n  }\n\n  return Promise.reject(error);\n});\nconst url = \"http://localhost:3001/api\";\n\nclass CreateAccount extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formData: {\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      email: Joi.string().required().email({\n        tlds: {\n          allow: false\n        }\n      }),\n      password: Joi.string().required().min(8),\n      confirmPassword: Joi.string().required().min(8)\n    };\n\n    this.validateOnSubmit = () => {\n      const result = Joi.validate(this.state.formData, this.schema, {\n        abortEarly: false\n      });\n      if (!result.error && this.state.formData.confirmPassword === this.state.formData.password) return null;\n\n      if (result.error) {\n        const errors = {};\n\n        for (let item of result.error.details) {\n          errors[item.path[0]] = item.message;\n        }\n\n        return errors;\n      }\n\n      if (this.state.formData.confirmPassword !== this.state.formData.password) {\n        const errors = {};\n        errors.confirmPassword = \"password mismatch\";\n        return errors;\n      }\n    };\n\n    this.validateOnChange = input => {\n      const obj = {\n        [input.name]: input.value\n      };\n      const subSchema = {\n        [input.name]: this.schema[input.name]\n      };\n      const {\n        error\n      } = Joi.validate(obj, subSchema);\n      if (!error && this.state.formData.confirmPassword === this.state.formData.password) return null;\n\n      if (error) {\n        return error.details[0].message;\n      }\n\n      if (input.name == \"confirmPassword\" && input.value != this.state.formData.password) {\n        return \"password mismatch\";\n      }\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const errors = this.validateOnSubmit();\n      await this.setState({\n        errors: errors || {}\n      });\n      if (errors) return;\n      this.doSubmit();\n    };\n\n    this.doSubmit = async () => {\n      try {\n        await axios.post(`${url}/register`, this.state.formData);\n      } catch (ex) {\n        if (ex.response) {\n          if (ex.response.status === 404) {\n            alert(ex.response.data);\n          } else alert(\"Bad request\");\n        }\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row no-gutter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-lg-6 col-xl-7 d-none d-md-flex bg-primary-transparent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row wd-100p mx-auto text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-lg-12 col-xl-12 my-auto mx-auto wd-100p\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://www.goinstablog.com/goinstablog.com/sumitdesign/design/digibids.com/common/img/backgrounds/login.png\",\n      className: \"my-auto ht-xl-80p wd-md-100p wd-xl-80p mx-auto\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 col-lg-6 col-xl-5 bg-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login d-flex align-items-center py-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container p-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-10 col-lg-10 col-xl-9 mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-sigin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mb-2 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://www.goinstablog.com/goinstablog.com/sumitdesign/design/digibids.com/common/img/logo/logo.png\",\n      className: \"sign-favicon\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-sigin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-signup-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 29\n      }\n    }, \"Get Started\"), /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"font-weight-semibold mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, \"It's free to signup and only takes a minute.\"), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 29\n      }\n    }, this.renderInput(\"email\", \"Email\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderInput(\"confirmPassword\", \"Confirm Password\", \"password\"), this.renderButton(\"Sign Up\", this.handleSubmit), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row row-xs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-facebook\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 37\n      }\n    }), \" Signup with Facebook\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6 mg-t-10 mg-sm-t-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-google\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 37\n      }\n    }), \" Signup with Google\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-signin-footer mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 31\n      }\n    }, \"Already have an account? \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 58\n      }\n    }, \"Sign In\"))))))))))))));\n  }\n\n}\n\nexport default CreateAccount;","map":{"version":3,"sources":["/Users/prashantkansal/Desktop/techgropse/digiTender/digiTenderFrontend/src/createAccount.jsx"],"names":["React","Component","Form","Joi","axios","interceptors","response","use","error","alert","Promise","reject","url","CreateAccount","state","formData","email","password","confirmPassword","errors","schema","string","required","tlds","allow","min","validateOnSubmit","result","validate","abortEarly","item","details","path","message","validateOnChange","input","obj","name","value","subSchema","handleSubmit","e","preventDefault","setState","doSubmit","post","ex","status","data","render","renderInput","renderButton"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Form from \"./macroComponents/form/form\";\nimport Joi from \"joi-browser\";\nimport axios from \"axios\";\n//const config = require(\"config\");\n\naxios.interceptors.response.use(null, (error) => {\n  if (!error.response || error.response >= 404) {\n    alert(\"an unexpected error occured\");\n  }\n  return Promise.reject(error);\n});\n\nconst url = \"http://localhost:3001/api\";\nclass CreateAccount extends Form {\n  state = {\n    formData: {\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n    },\n    errors: {},\n  };\n  schema = {\n    email: Joi.string()\n      .required()\n      .email({ tlds: { allow: false } }),\n    password: Joi.string().required().min(8),\n    confirmPassword: Joi.string().required().min(8),\n  };\n\n  validateOnSubmit = () => {\n    const result = Joi.validate(this.state.formData, this.schema, {\n      abortEarly: false,\n    });\n    if (\n      !result.error &&\n      this.state.formData.confirmPassword === this.state.formData.password\n    )\n      return null;\n    if (result.error) {\n      const errors = {};\n      for (let item of result.error.details) {\n        errors[item.path[0]] = item.message;\n      }\n      return errors;\n    }\n    if (this.state.formData.confirmPassword !== this.state.formData.password) {\n      const errors = {};\n      errors.confirmPassword = \"password mismatch\";\n      return errors;\n    }\n  };\n\n  validateOnChange = (input) => {\n    const obj = { [input.name]: input.value };\n    const subSchema = { [input.name]: this.schema[input.name] };\n    const { error } = Joi.validate(obj, subSchema);\n    if (\n      !error &&\n      this.state.formData.confirmPassword === this.state.formData.password\n    )\n      return null;\n    if (error) {\n      return error.details[0].message;\n    }\n    if (\n      input.name == \"confirmPassword\" &&\n      input.value != this.state.formData.password\n    ) {\n      return \"password mismatch\";\n    }\n  };\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    const errors = this.validateOnSubmit();\n    await this.setState({ errors: errors || {} });\n\n    if (errors) return;\n\n    this.doSubmit();\n  };\n\n  doSubmit = async () => {\n    try {\n      await axios.post(`${url}/register`, this.state.formData);\n    } catch (ex) {\n      if (ex.response) {\n        if (ex.response.status === 404) {\n          alert(ex.response.data);\n        } else alert(\"Bad request\");\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"page\">\n        <div className=\"container-fluid\">\n          <div className=\"row no-gutter\">\n            <div className=\"col-md-6 col-lg-6 col-xl-7 d-none d-md-flex bg-primary-transparent\">\n              <div className=\"row wd-100p mx-auto text-center\">\n                <div className=\"col-md-12 col-lg-12 col-xl-12 my-auto mx-auto wd-100p\">\n                  <img\n                    src=\"https://www.goinstablog.com/goinstablog.com/sumitdesign/design/digibids.com/common/img/backgrounds/login.png\"\n                    className=\"my-auto ht-xl-80p wd-md-100p wd-xl-80p mx-auto\"\n                    alt=\"logo\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"col-md-6 col-lg-6 col-xl-5 bg-white\">\n              <div className=\"login d-flex align-items-center py-2\">\n                <div className=\"container p-0\">\n                  <div className=\"row\">\n                    <div className=\"col-md-10 col-lg-10 col-xl-9 mx-auto\">\n                      <div className=\"card-sigin\">\n                        <div className=\"mb-2 d-flex\">\n                          <a href=\"#\">\n                            <img\n                              src=\"https://www.goinstablog.com/goinstablog.com/sumitdesign/design/digibids.com/common/img/logo/logo.png\"\n                              className=\"sign-favicon\"\n                              alt=\"logo\"\n                            />\n                          </a>\n                        </div>\n                        <div className=\"card-sigin\">\n                          <div className=\"main-signup-header\">\n                            <h2>Get Started</h2>\n                            <h5 className=\"font-weight-semibold mb-4\">\n                              It's free to signup and only takes a minute.\n                            </h5>\n                            <form>\n                              {this.renderInput(\"email\", \"Email\")}\n                              {this.renderInput(\n                                \"password\",\n                                \"Password\",\n                                \"password\"\n                              )}\n                              {this.renderInput(\n                                \"confirmPassword\",\n                                \"Confirm Password\",\n                                \"password\"\n                              )}\n\n                              {this.renderButton(\"Sign Up\", this.handleSubmit)}\n\n                              <div className=\"row row-xs\">\n                                <div className=\"col-sm-6\">\n                                  <button className=\"btn btn-block\">\n                                    <i className=\"fa fa-facebook\"></i> Signup\n                                    with Facebook\n                                  </button>\n                                </div>\n                                <div className=\"col-sm-6 mg-t-10 mg-sm-t-0\">\n                                  <button className=\"btn btn-danger btn-block\">\n                                    <i className=\"fa fa-google\"></i> Signup with\n                                    Google\n                                  </button>\n                                </div>\n                              </div>\n                            </form>\n                            <div className=\"main-signin-footer mt-5\">\n                              <p>\n                                Already have an account? <a href=\"#\">Sign In</a>\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CreateAccount;\n"]},"metadata":{},"sourceType":"module"}